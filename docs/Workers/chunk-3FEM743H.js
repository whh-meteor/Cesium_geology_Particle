/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.118.1
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */
import{b as Z,h as I}from"./chunk-CMXCDAKR.js";import{a as n,b as N,d as A,e as _}from"./chunk-LJCGAQ64.js";import{a as cn}from"./chunk-JFG572S7.js";import{a as T}from"./chunk-42NIXFVW.js";import{a as on,b as S}from"./chunk-5YVCOCPP.js";import{e as x}from"./chunk-U73D6PDD.js";function V(n){this._ellipsoid=T(n,A.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(V.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),V.prototype.project=function(e,t){let r=this._semimajorAxis,a=e.longitude*r,o=e.latitude*r,c=e.height;return x(t)?(t.x=a,t.y=o,t.z=c,t):new n(a,o,c)},V.prototype.unproject=function(n,e){if(!x(n))throw new on("cartesian is required");let t=this._oneOverSemimajorAxis,r=n.x*t,a=n.y*t,o=n.z;return x(e)?(e.longitude=r,e.latitude=a,e.height=o,e):new N(r,a,o)};var U=V,fn={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},W=Object.freeze(fn);function sn(n,e){this.start=T(n,0),this.stop=T(e,0)}var rn=sn;function a(e,t){this.center=n.clone(T(e,n.ZERO)),this.radius=T(t,0)}var F=new n,Y=new n,J=new n,K=new n,Q=new n,$=new n,L=new n,b=new n,H=new n,nn=new n,tn=new n,en=new n,mn=4/3*cn.PI;a.fromPoints=function(e,t){if(x(t)||(t=new a),!x(e)||0===e.length)return t.center=n.clone(n.ZERO,t.center),t.radius=0,t;let r,o=n.clone(e[0],L),c=n.clone(o,F),i=n.clone(o,Y),u=n.clone(o,J),l=n.clone(o,K),s=n.clone(o,Q),d=n.clone(o,$),f=e.length;for(r=1;r<f;r++){n.clone(e[r],o);let t=o.x,a=o.y,f=o.z;t<c.x&&n.clone(o,c),t>l.x&&n.clone(o,l),a<i.y&&n.clone(o,i),a>s.y&&n.clone(o,s),f<u.z&&n.clone(o,u),f>d.z&&n.clone(o,d)}let y=n.magnitudeSquared(n.subtract(l,c,b)),p=n.magnitudeSquared(n.subtract(s,i,b)),m=n.magnitudeSquared(n.subtract(d,u,b)),h=c,S=l,g=y;p>g&&(g=p,h=i,S=s),m>g&&(g=m,h=u,S=d);let z=H;z.x=.5*(h.x+S.x),z.y=.5*(h.y+S.y),z.z=.5*(h.z+S.z);let w=n.magnitudeSquared(n.subtract(S,z,b)),O=Math.sqrt(w),j=nn;j.x=c.x,j.y=i.y,j.z=u.z;let q=tn;q.x=l.x,q.y=s.y,q.z=d.z;let T=n.midpoint(j,q,en),E=0;for(r=0;r<f;r++){n.clone(e[r],o);let t=n.magnitude(n.subtract(o,T,b));t>E&&(E=t);let a=n.magnitudeSquared(n.subtract(o,z,b));if(a>w){let n=Math.sqrt(a);O=.5*(O+n),w=O*O;let e=n-O;z.x=(O*z.x+e*o.x)/n,z.y=(O*z.y+e*o.y)/n,z.z=(O*z.z+e*o.z)/n}}return O<E?(n.clone(z,t.center),t.radius=O):(n.clone(T,t.center),t.radius=E),t};var un=new U,xn=new n,yn=new n,k=new N,X=new N;a.fromRectangle2D=function(n,e,t){return a.fromRectangleWithHeights2D(n,e,0,0,t)},a.fromRectangleWithHeights2D=function(e,t,r,o,c){if(x(c)||(c=new a),!x(e))return c.center=n.clone(n.ZERO,c.center),c.radius=0,c;t=T(t,un),I.southwest(e,k),k.height=r,I.northeast(e,X),X.height=o;let i=t.project(k,xn),u=t.project(X,yn),l=u.x-i.x,s=u.y-i.y,d=u.z-i.z;c.radius=.5*Math.sqrt(l*l+s*s+d*d);let f=c.center;return f.x=i.x+.5*l,f.y=i.y+.5*s,f.z=i.z+.5*d,c};var ln=[];a.fromRectangle3D=function(e,t,r,o){if(t=T(t,A.WGS84),r=T(r,0),x(o)||(o=new a),!x(e))return o.center=n.clone(n.ZERO,o.center),o.radius=0,o;let c=I.subsample(e,t,r,ln);return a.fromPoints(c,o)},a.fromVertices=function(e,t,r,o){if(x(o)||(o=new a),!x(e)||0===e.length)return o.center=n.clone(n.ZERO,o.center),o.radius=0,o;t=T(t,n.ZERO),r=T(r,3),S.typeOf.number.greaterThanOrEquals("stride",r,3);let c=L;c.x=e[0]+t.x,c.y=e[1]+t.y,c.z=e[2]+t.z;let i,u=n.clone(c,F),l=n.clone(c,Y),s=n.clone(c,J),d=n.clone(c,K),f=n.clone(c,Q),y=n.clone(c,$),p=e.length;for(i=0;i<p;i+=r){let r=e[i]+t.x,a=e[i+1]+t.y,o=e[i+2]+t.z;c.x=r,c.y=a,c.z=o,r<u.x&&n.clone(c,u),r>d.x&&n.clone(c,d),a<l.y&&n.clone(c,l),a>f.y&&n.clone(c,f),o<s.z&&n.clone(c,s),o>y.z&&n.clone(c,y)}let m=n.magnitudeSquared(n.subtract(d,u,b)),h=n.magnitudeSquared(n.subtract(f,l,b)),g=n.magnitudeSquared(n.subtract(y,s,b)),z=u,w=d,O=m;h>O&&(O=h,z=l,w=f),g>O&&(O=g,z=s,w=y);let j=H;j.x=.5*(z.x+w.x),j.y=.5*(z.y+w.y),j.z=.5*(z.z+w.z);let q=n.magnitudeSquared(n.subtract(w,j,b)),E=Math.sqrt(q),R=nn;R.x=u.x,R.y=l.y,R.z=s.z;let P=tn;P.x=d.x,P.y=f.y,P.z=y.z;let v=n.midpoint(R,P,en),D=0;for(i=0;i<p;i+=r){c.x=e[i]+t.x,c.y=e[i+1]+t.y,c.z=e[i+2]+t.z;let r=n.magnitude(n.subtract(c,v,b));r>D&&(D=r);let a=n.magnitudeSquared(n.subtract(c,j,b));if(a>q){let n=Math.sqrt(a);E=.5*(E+n),q=E*E;let e=n-E;j.x=(E*j.x+e*c.x)/n,j.y=(E*j.y+e*c.y)/n,j.z=(E*j.z+e*c.z)/n}}return E<D?(n.clone(j,o.center),o.radius=E):(n.clone(v,o.center),o.radius=D),o},a.fromEncodedCartesianVertices=function(e,t,r){if(x(r)||(r=new a),!x(e)||!x(t)||e.length!==t.length||0===e.length)return r.center=n.clone(n.ZERO,r.center),r.radius=0,r;let o=L;o.x=e[0]+t[0],o.y=e[1]+t[1],o.z=e[2]+t[2];let c,i=n.clone(o,F),u=n.clone(o,Y),l=n.clone(o,J),s=n.clone(o,K),d=n.clone(o,Q),f=n.clone(o,$),y=e.length;for(c=0;c<y;c+=3){let r=e[c]+t[c],a=e[c+1]+t[c+1],y=e[c+2]+t[c+2];o.x=r,o.y=a,o.z=y,r<i.x&&n.clone(o,i),r>s.x&&n.clone(o,s),a<u.y&&n.clone(o,u),a>d.y&&n.clone(o,d),y<l.z&&n.clone(o,l),y>f.z&&n.clone(o,f)}let p=n.magnitudeSquared(n.subtract(s,i,b)),m=n.magnitudeSquared(n.subtract(d,u,b)),h=n.magnitudeSquared(n.subtract(f,l,b)),S=i,g=s,z=p;m>z&&(z=m,S=u,g=d),h>z&&(z=h,S=l,g=f);let w=H;w.x=.5*(S.x+g.x),w.y=.5*(S.y+g.y),w.z=.5*(S.z+g.z);let O=n.magnitudeSquared(n.subtract(g,w,b)),j=Math.sqrt(O),q=nn;q.x=i.x,q.y=u.y,q.z=l.z;let T=tn;T.x=s.x,T.y=d.y,T.z=f.z;let E=n.midpoint(q,T,en),R=0;for(c=0;c<y;c+=3){o.x=e[c]+t[c],o.y=e[c+1]+t[c+1],o.z=e[c+2]+t[c+2];let r=n.magnitude(n.subtract(o,E,b));r>R&&(R=r);let a=n.magnitudeSquared(n.subtract(o,w,b));if(a>O){let n=Math.sqrt(a);j=.5*(j+n),O=j*j;let e=n-j;w.x=(j*w.x+e*o.x)/n,w.y=(j*w.y+e*o.y)/n,w.z=(j*w.z+e*o.z)/n}}return j<R?(n.clone(w,r.center),r.radius=j):(n.clone(E,r.center),r.radius=R),r},a.fromCornerPoints=function(e,t,r){S.typeOf.object("corner",e),S.typeOf.object("oppositeCorner",t),x(r)||(r=new a);let o=n.midpoint(e,t,r.center);return r.radius=n.distance(o,t),r},a.fromEllipsoid=function(e,t){return S.typeOf.object("ellipsoid",e),x(t)||(t=new a),n.clone(n.ZERO,t.center),t.radius=e.maximumRadius,t};var pn=new n;a.fromBoundingSpheres=function(e,t){if(x(t)||(t=new a),!x(e)||0===e.length)return t.center=n.clone(n.ZERO,t.center),t.radius=0,t;let r=e.length;if(1===r)return a.clone(e[0],t);if(2===r)return a.union(e[0],e[1],t);let o,c=[];for(o=0;o<r;o++)c.push(e[o].center);t=a.fromPoints(c,t);let i=t.center,u=t.radius;for(o=0;o<r;o++){let t=e[o];u=Math.max(u,n.distance(i,t.center,pn)+t.radius)}return t.radius=u,t};var Sn=new n,hn=new n,zn=new n;a.fromOrientedBoundingBox=function(e,t){S.defined("orientedBoundingBox",e),x(t)||(t=new a);let r=e.halfAxes,o=_.getColumn(r,0,Sn),c=_.getColumn(r,1,hn),i=_.getColumn(r,2,zn);return n.add(o,c,o),n.add(o,i,o),t.center=n.clone(e.center,t.center),t.radius=n.magnitude(o),t};var wn=new n,Pn=new n;a.fromTransformation=function(e,t){S.typeOf.object("transformation",e),x(t)||(t=new a);let r=Z.getTranslation(e,wn),o=Z.getScale(e,Pn),c=.5*n.magnitude(o);return t.center=n.clone(r,t.center),t.radius=c,t},a.clone=function(e,t){if(x(e))return x(t)?(t.center=n.clone(e.center,t.center),t.radius=e.radius,t):new a(e.center,e.radius)},a.packedLength=4,a.pack=function(n,e,t){S.typeOf.object("value",n),S.defined("array",e),t=T(t,0);let r=n.center;return e[t++]=r.x,e[t++]=r.y,e[t++]=r.z,e[t]=n.radius,e},a.unpack=function(n,e,t){S.defined("array",n),e=T(e,0),x(t)||(t=new a);let r=t.center;return r.x=n[e++],r.y=n[e++],r.z=n[e++],t.radius=n[e],t};var gn=new n,On=new n;a.union=function(e,t,r){S.typeOf.object("left",e),S.typeOf.object("right",t),x(r)||(r=new a);let o=e.center,c=e.radius,i=t.center,u=t.radius,l=n.subtract(i,o,gn),s=n.magnitude(l);if(c>=s+u)return e.clone(r),r;if(u>=s+c)return t.clone(r),r;let d=.5*(c+s+u),f=n.multiplyByScalar(l,(-c+d)/s,On);return n.add(f,o,f),n.clone(f,r.center),r.radius=d,r};var jn=new n;a.expand=function(e,t,r){S.typeOf.object("sphere",e),S.typeOf.object("point",t),r=a.clone(e,r);let o=n.magnitude(n.subtract(t,r.center,jn));return o>r.radius&&(r.radius=o),r},a.intersectPlane=function(e,t){S.typeOf.object("sphere",e),S.typeOf.object("plane",t);let r=e.center,a=e.radius,o=t.normal,c=n.dot(o,r)+t.distance;return c<-a?W.OUTSIDE:c<a?W.INTERSECTING:W.INSIDE},a.transform=function(n,e,t){return S.typeOf.object("sphere",n),S.typeOf.object("transform",e),x(t)||(t=new a),t.center=Z.multiplyByPoint(e,n.center,t.center),t.radius=Z.getMaximumScale(e)*n.radius,t};var bn=new n;a.distanceSquaredTo=function(e,t){S.typeOf.object("sphere",e),S.typeOf.object("cartesian",t);let r=n.subtract(e.center,t,bn),a=n.magnitude(r)-e.radius;return a<=0?0:a*a},a.transformWithoutScale=function(n,e,t){return S.typeOf.object("sphere",n),S.typeOf.object("transform",e),x(t)||(t=new a),t.center=Z.multiplyByPoint(e,n.center,t.center),t.radius=n.radius,t};var qn=new n;a.computePlaneDistances=function(e,t,r,a){S.typeOf.object("sphere",e),S.typeOf.object("position",t),S.typeOf.object("direction",r),x(a)||(a=new rn);let o=n.subtract(e.center,t,qn),c=n.dot(r,o);return a.start=c-e.radius,a.stop=c+e.radius,a};var an=new n,Mn=new n,Tn=new n,Cn=new n,Rn=new n,En=new N,dn=new Array(8);for(let e=0;e<8;++e)dn[e]=new n;var Dn=new U;a.projectTo2D=function(e,t,r){S.typeOf.object("sphere",e),t=T(t,Dn);let o,c=t.ellipsoid,i=e.center,u=e.radius;o=n.equals(i,n.ZERO)?n.clone(n.UNIT_X,an):c.geodeticSurfaceNormal(i,an);let l=n.cross(n.UNIT_Z,o,Mn);n.normalize(l,l);let s=n.cross(o,l,Tn);n.normalize(s,s),n.multiplyByScalar(o,u,o),n.multiplyByScalar(s,u,s),n.multiplyByScalar(l,u,l);let d=n.negate(s,Rn),f=n.negate(l,Cn),y=dn,p=y[0];n.add(o,s,p),n.add(p,l,p),p=y[1],n.add(o,s,p),n.add(p,f,p),p=y[2],n.add(o,d,p),n.add(p,f,p),p=y[3],n.add(o,d,p),n.add(p,l,p),n.negate(o,o),p=y[4],n.add(o,s,p),n.add(p,l,p),p=y[5],n.add(o,s,p),n.add(p,f,p),p=y[6],n.add(o,d,p),n.add(p,f,p),p=y[7],n.add(o,d,p),n.add(p,l,p);let x=y.length;for(let a=0;a<x;++a){let e=y[a];n.add(i,e,e);let r=c.cartesianToCartographic(e,En);t.project(r,e)}r=a.fromPoints(y,r),i=r.center;let m=i.x,h=i.y,b=i.z;return i.x=b,i.y=m,i.z=h,r},a.isOccluded=function(n,e){return S.typeOf.object("sphere",n),S.typeOf.object("occluder",e),!e.isBoundingSphereVisible(n)},a.equals=function(e,t){return e===t||x(e)&&x(t)&&n.equals(e.center,t.center)&&e.radius===t.radius},a.prototype.intersectPlane=function(n){return a.intersectPlane(this,n)},a.prototype.distanceSquaredTo=function(n){return a.distanceSquaredTo(this,n)},a.prototype.computePlaneDistances=function(n,e,t){return a.computePlaneDistances(this,n,e,t)},a.prototype.isOccluded=function(n){return a.isOccluded(this,n)},a.prototype.equals=function(n){return a.equals(this,n)},a.prototype.clone=function(n){return a.clone(this,n)},a.prototype.volume=function(){let n=this.radius;return mn*n*n*n};var et=a;export{U as a,W as b,rn as c,et as d};